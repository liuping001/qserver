deploy_info:
  init_host:
    copy_file:
      - src: dev_server_supervisor.ini
        dest: /etc/supervisord.d/
    init_cmd:
      - "supervisorctl  -c /etc/supervisord.conf update"
      - "mkdir -p /data"


  redissvr:
    template:
      - src: ../app/redissvr/redissvr.toml
        dest: /data/redissvr/redissvr.toml
    copy_file:
      - src: ../build/app/redissvr/redissvr
        dest: /data/redissvr/redissvr
    init_cmd:
      - "mkdir -p /data/redissvr"
    supervisor_conf: /etc/supervisord.conf

  discovery:
    copy_file:
      - src: ../build/app/discovery/discovery
        dest: /data/discovery/discovery
    init_cmd:
      - "mkdir -p /data/discovery"
    template:
      - src: ../app/discovery/discovery.toml
        dest: /data/discovery/discovery.toml
    supervisor_conf: /etc/supervisord.conf

  test:
    copy_file:
      - src: ../build/app/test/test
        dest: /data/test/test
    init_cmd:
      - "mkdir -p /data/test"
    template:
      - src: ../app/test/test.toml
        dest: /data/test/test.toml
    supervisor_conf: /etc/supervisord.conf